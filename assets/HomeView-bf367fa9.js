import{r as c,u as x,c as u,o as w,a as V,b as d,t as m,d as j,e as k,f as S}from"./index-c2daf25e.js";import{_ as B}from"./InputModal-f629b62e.js";const C={class:"flex justify-center my-8 py-16"},R={class:"flex flex-col"},$={class:"input-label text-base mb-2"},q={class:"input-label text-base mb-2 text-red-600"},D={__name:"HomeView",setup(I){const i=c(!1),o=c(""),n=c(""),r=c(""),p=S(),v=x(),_=u(()=>n.value?"請輸入您的登入代碼：":"請輸入您的電子郵件地址："),f=u(()=>n.value?"例如：123456":"例如：sara@web-tech.tw"),b=u(()=>n.value?"請於您的電子郵件信箱收取登入代碼。":""),h=async s=>{if(!s){o.value="請輸入資料";return}o.value="",i.value=!0,n.value?await y(s):await g(s),i.value=!1},g=async s=>{var a,t;try{const l=await(await p.post("tokens",{json:{email:s}})).json();l!=null&&l.session_id?(n.value=l.session_id,r.value=""):o.value="發生錯誤 (無錯誤代碼)"}catch(e){if(((a=e==null?void 0:e.response)==null?void 0:a.status)===404)sessionStorage.setItem("sara_register_email",s),v.push("/register");else{const l=((t=e==null?void 0:e.response)==null?void 0:t.status)||"無錯誤代碼";o.value=`發生錯誤 (${l})`,console.error(e.message)}}},y=async s=>{var a;try{await p.patch("tokens",{json:{session_id:n.value,code:s}}),o.value="登入成功，正在寫入憑證...",r.value="",k()}catch(t){const e=((a=t==null?void 0:t.response)==null?void 0:a.status)||"無錯誤代碼";o.value=`發生錯誤 (${e})`,console.error(t.message)}};return(s,a)=>(w(),V("div",C,[d("div",R,[d("label",$,m(_.value),1),d("p",q,m(o.value),1),j(B,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),loading:i.value,placeholder:f.value,description:b.value,onSubmit:h},null,8,["modelValue","loading","placeholder","description"])])]))}};export{D as default};
