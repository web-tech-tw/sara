import{r as b,c as w,g as k,h as _,o,a as n,b as t,t as l,i as r,F as f,j as h,k as E,w as T,v as S,d as V,l as I,f as N}from"./index-c76db5af.js";const A={class:"flex justify-center my-8 py-16"},C={key:0,class:"flex flex-col mx-5 md:mx-auto"},R={class:"max-w-2xl mx-auto sm:px-6 lg:px-8"},D={key:0,class:"overflow-hidden shadow-md"},O={class:"px-6 py-4 bg-white border-b border-gray-200 font-bold"},H={class:"p-6 bg-white border-b border-gray-200"},M={class:"p-6 bg-white border-b border-gray-200 text-right"},B={key:0,class:"p-6 bg-white border-b border-gray-200"},j={class:"list-disc ml-7"},F={key:1,class:"overflow-hidden shadow-md"},L={class:"p-6 bg-white border-b border-gray-200"},U={class:"flex rounded bg-white"},X={class:"p-6 bg-white border-b border-gray-200"},$={class:"p-6 bg-white border-gray-200 text-right"},K={key:1},z={__name:"ManageView",setup(P){const{VITE_INDEX_INTE_HOST:m}={VITE_INDEX_INTE_HOST:"https://web-tech.tw",VITE_SARA_INTE_HOST:"https://web-tech.tw/sara",VITE_SARA_RECV_HOST:"https://web-tech.tw/recv/sara",VITE_SARA_TOKEN_NAME:"unified_token",BASE_URL:"/sara/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},u=b(!1),i=b({nickname:""}),s=b(null),p=N(),c=w(()=>{var a;return Array.isArray((a=s.value)==null?void 0:a.roles)&&s.value.roles.length}),x=async()=>{await p.put("users/me",{nickname:i.value.nickname}),setTimeout(()=>location.reload(),500)},g=()=>{localStorage.clear(),location.assign(m)};return k(async()=>{try{const e=await(await p.get("users/me")).json();s.value=e.profile,i.value.nickname=e.nickname}catch(a){console.warn(a.message)}}),(a,e)=>{const v=_("router-link");return o(),n("div",A,[s.value?(o(),n("div",C,[t("div",R,[u.value?(o(),n("div",F,[e[13]||(e[13]=t("div",{class:"px-6 py-4 bg-white border-b border-gray-200 font-bold"}," 修改個人資料： ",-1)),t("div",L,[t("div",U,[e[9]||(e[9]=t("label",{class:"px-4 py-1 text-gray-600",for:"nickname"},"暱稱：",-1)),T(t("input",{id:"nickname","onUpdate:modelValue":e[1]||(e[1]=d=>i.value.nickname=d),class:"border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none",placeholder:"例如：星川 サラ",type:"text"},null,512),[[S,i.value.nickname]])])]),t("div",X,[e[11]||(e[11]=r(" 若要修改電子郵件地址，請點 ")),V(v,{class:"text-amber-900",to:"/manage/email"},{default:I(()=>e[10]||(e[10]=[r(" 此處 ")])),_:1}),e[12]||(e[12]=r(" 。 "))]),t("div",$,[t("button",{class:"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",onClick:e[2]||(e[2]=d=>u.value=!1)}," 取消 "),t("button",{class:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded",onClick:x}," 確定修改 ")])])):(o(),n("div",D,[t("div",O," 您好，"+l(s.value.nickname)+"，這裡是您的個人資料： ",1),t("div",H,[e[3]||(e[3]=t("span",{class:"text-gray-600"},"暱稱：",-1)),r(l(s.value.nickname),1),e[4]||(e[4]=t("br",null,null,-1)),e[5]||(e[5]=t("span",{class:"text-gray-600"},"電子郵件地址：",-1)),r(l(s.value.email),1),e[6]||(e[6]=t("br",null,null,-1)),e[7]||(e[7]=t("span",{class:"text-gray-600"},"Sara系統使用者識別碼：",-1)),r(l(s.value._id),1)]),t("div",M,[t("button",{class:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded mr-3",onClick:e[0]||(e[0]=d=>u.value=!0)}," 修改個人資料 "),t("button",{class:"bg-amber-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-amber-600 rounded",onClick:g}," 登出 ")]),c.value?(o(),n("div",B,[e[8]||(e[8]=t("span",{class:"text-gray-600"},"持有權限：",-1)),t("ul",j,[(o(!0),n(f,null,h(s.value.roles,(d,y)=>(o(),n("li",{key:y},l(d),1))),128))])])):E("",!0)]))])])):(o(),n("div",K,l(s.value===null?"載入中...":"發生錯誤"),1))])}}};export{z as default};
