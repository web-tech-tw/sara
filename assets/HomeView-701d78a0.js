import{r as u,u as V,c,o as j,a as C,b as n,t as $,d as p,e as S,F as B,f as R,g as q,h as F}from"./index-9ed9b1d6.js";import{_ as I}from"./InputModal-dc7765d8.js";import{_ as M}from"./ToastModal-deecaa8d.js";const N={class:"flex justify-center my-8 py-16"},P={class:"flex flex-col mx-5"},U={class:"input-label text-base mb-2"},A={class:"flex justify-center mt-5"},T={__name:"HomeView",setup(D){const d=u(!1),a=u(""),m=u(""),l=u(""),i=u(""),v=F(),f=V(),_=c(()=>l.value?"請輸入您的登入代碼：":"請輸入您的電子郵件地址："),y=c(()=>l.value?"例如：123456":"例如：sara@web-tech.tw"),x=c(()=>l.value?`請於您的電子郵件信箱 ${m.value} 收取登入代碼。`:""),b=c(()=>l.value?"text":"email"),g=()=>{a.value="尚未實作"},h=async o=>{if(!o){a.value="請輸入資料";return}a.value="",d.value=!0,l.value?await k(o):await w(o),d.value=!1},w=async o=>{var e,s;try{const r=await(await v.post("tokens",{json:{email:o}})).json();r!=null&&r.session_id?(l.value=r.session_id,m.value=i.value,i.value=""):a.value="發生錯誤 (無錯誤代碼)"}catch(t){if(((e=t==null?void 0:t.response)==null?void 0:e.status)===404)sessionStorage.setItem("sara_register_email",o),f.push("/register");else{const r=((s=t==null?void 0:t.response)==null?void 0:s.status)||"無錯誤代碼";a.value=`發生錯誤 (${r})`,console.error(t.message)}}},k=async o=>{var e;try{await v.patch("tokens",{json:{session_id:l.value,code:o}}),a.value="登入成功，正在寫入憑證...",R()}catch(s){const t=((e=s==null?void 0:s.response)==null?void 0:e.status)||"無錯誤代碼";a.value=`發生錯誤 (${t})`,console.error(s.message)}};return(o,e)=>(j(),C(B,null,[n("div",N,[n("div",P,[n("label",U,$(_.value),1),p(I,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s),loading:d.value,placeholder:y.value,description:x.value,"input-type":b.value,onSubmit:h},null,8,["modelValue","loading","placeholder","description","input-type"])])]),n("div",A,[n("button",{class:"flex items-center space-x-2 bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",onClick:g},[n("span",null,[p(S(q),{class:"h-5 w-5"})]),e[2]||(e[2]=n("span",{class:"font-bold"}," Passkey ",-1))])]),p(M,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s)},null,8,["modelValue"])],64))}};export{T as default};
