import{r as i,u as k,c as d,o as V,a as j,b as l,t as C,d as m,e as $,F as S,f as B,g as R,h as q}from"./index-d6ff3d95.js";import{_ as F}from"./InputModal-2cfea156.js";import{_ as I}from"./ToastModal-0facbca3.js";const M={class:"flex justify-center my-8 py-16"},N={class:"flex flex-col mx-5"},P={class:"input-label text-base mb-2"},U={class:"flex justify-center mt-5"},L={__name:"HomeView",setup(A){const c=i(!1),a=i(""),p=i(""),n=i(""),u=i(""),v=q(),f=k(),_=d(()=>n.value?"請輸入您的登入代碼：":"請輸入您的電子郵件地址："),x=d(()=>n.value?"例如：123456":"例如：sara@web-tech.tw"),b=d(()=>n.value?`請於您的電子郵件信箱 ${p.value} 收取登入代碼。`:""),g=()=>{a.value="尚未實作"},y=async o=>{if(!o){a.value="請輸入資料";return}a.value="",c.value=!0,n.value?await w(o):await h(o),c.value=!1},h=async o=>{var e,s;try{const r=await(await v.post("tokens",{json:{email:o}})).json();r!=null&&r.session_id?(n.value=r.session_id,p.value=u.value,u.value=""):a.value="發生錯誤 (無錯誤代碼)"}catch(t){if(((e=t==null?void 0:t.response)==null?void 0:e.status)===404)sessionStorage.setItem("sara_register_email",o),f.push("/register");else{const r=((s=t==null?void 0:t.response)==null?void 0:s.status)||"無錯誤代碼";a.value=`發生錯誤 (${r})`,console.error(t.message)}}},w=async o=>{var e;try{await v.patch("tokens",{json:{session_id:n.value,code:o}}),a.value="登入成功，正在寫入憑證...",B()}catch(s){const t=((e=s==null?void 0:s.response)==null?void 0:e.status)||"無錯誤代碼";a.value=`發生錯誤 (${t})`,console.error(s.message)}};return(o,e)=>(V(),j(S,null,[l("div",M,[l("div",N,[l("label",P,C(_.value),1),m(F,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),loading:c.value,placeholder:x.value,description:b.value,onSubmit:y},null,8,["modelValue","loading","placeholder","description"])])]),l("div",U,[l("button",{class:"flex items-center space-x-2 bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",onClick:g},[l("span",null,[m($(R),{class:"h-5 w-5"})]),e[2]||(e[2]=l("span",{class:"font-bold"}," Passkey ",-1))])]),m(I,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value=s)},null,8,["modelValue"])],64))}};export{L as default};
